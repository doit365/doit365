---
title: "PWA 적용하기"
description:
date: 2023-12-01
update: 2023-12-01
tags:
  - pwa
  - webpush
series: "웹 푸시 적용하기"
---

ios 16.4 버전이 업데이트되면서 ios에서도 웹 푸시 알림을 받아볼 수 있게 되었습니다. 웹 푸시 알람을 제공하기 위해 먼저 PWA에 대해 알아보겠습니다.

## PWA

"웹을 네이트브 앱처럼" - 웹과 앱의 장점을 결합

PWA (Progressive Web Apps)는 모바일 사이트에서 네이티브 앱과 같은 사용자 경험을 제공하고, 설치가 필요 없기 때문에 사용자는 앱을 다운로드하거나 업데이트 하는 불편함이 없습니다. (물론, 바탕화면에 바로가기 등록을 위한 간단한 설치과정이 있기는 하다.)

- 푸시 알림 기능

  - 일반적인 앱처럼 푸시알림 기능을 사용할 수 있다.
  - 브라우저를 닫은 상태에서도 푸시알림을 보낼 수 있기 때문에 사용자 접촉 횟수를 늘릴 수 있다.
  - 참고로 푸시 알림은 사용자의 허가를 선행해야 한다.

- 홈화면에 아이콘 추가

  - 일반 모바일 어플리케이션처럼 홈 화면에 아이콘을 추가할 수 있다.

- 설치의 불필요
  - 네이트브 앱과 달리 pwa 의 기본 작동은 웹 어플리케이션 방식이기 때문에 다운로드 불필요
  - 하지만 앱과 같은 외형과 사용감을 제공할 수 있다.
- 표시 속도 고속화
  - pwa 는 프리캐시 기능이 있어서, 사용자가 페이지를 읽고 있는 동안 다음페이지의 데이터를 읽어들릴 수 있다.

(프리캐시 : 브라우저의 캐싱(Cache-Control)과는 다르게 브라우저의 캐시 스토리지(Cache Storage)를 활용하여 웹 리소스를 캐싱하는 기술, 웹 애플리케이션을 접속하기 전에 미리 캐싱해놓는 캐싱 방법)

### PWA 장점

1. 오프라인과 온라인에서도 걱정 없는 **"신뢰성"**
2. 네이티브 앱보다 간단히 설치할 수 있는 **"편의성"**
3. 훨씬 강력해진 **"보안성"**
4. **단골 손님을 늘리는 "구독자 고객 관리"**
5. 모든 곳에서 실행되는 **"멀티 플랫폼"** 지원
6. 검색에 잘 노출되고 잘 퍼지는 **"확장성"**
7. 항상 새것 같은 **"최신성"**
8. 네이티브 앱도 부럽지 않은 **"사용성"**
9. 빠른 **"배포, 실행, 반응 속도"**

### 서비스워커

https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API

- 서비스 워커는 네트워크 요청을 중간에 가로채서 자신이 제어하는 캐시의 리소스로 교체할 수 있으므로 마치 프록시 서버처럼 작동한다고 볼 수 있다. 즉, 웹 애플리케이션에 오프라인 기능을 제공한다.
- 브라우저가 닫혀 있더라도 백그라운드에서 작동할 수 있다.
- 웹 브라우저의 네트워크 요청을 가로채어 조작 가능하다.
- 보안 상의 이유로 HTTPS에서만 동작한다. 네트워크 요청을 수정할 수 있다는 점에서 중간자 공격에 굉장히 취약하기 때문이다.
- 여러 탭에서 사용할 수 있으며 모든 탭이 닫힌다고 하더라도 계속 활성화되어 있다.

### PWA 적용하기

- HTTPS
- service worker
  - 브라우저가 백그라운드일 때 실행되는 스크립트이다.
  - 캐시를 이용해 오프라인일 때 웹페이지를 사용자에게 보여주게 하기 위한 파일이고 필수는 아니다.
- manifest 파일
  - 모바일 장치에서 설치할 때 아이콘, 이름, 경로등을 알려주는 json 파일이다.
  - 해당 앱에 들어갈 때 스플래시 이미지를 보여줘 좀 더 네이티브 앱과 가깝게 만들 수 도 있다.
- PWA Builder (https://www.pwabuilder.com/)
  마이크로소프트사에서 만들었으며, 웹사이트를 PWA로 전환할때, 검토해주고, 빠진부분들을 자동으로 채워주면서 심플하게 만들 수 있게 도와준다.
